{"version":3,"sources":["localStorageUtils.js","../state-manager/state.js","Model.js","Modal.js","moduleData.js","urlModules.js","utils.js","script.js"],"names":["save","key","value","localStorage","setItem","JSON","stringify","get","fallback","data","getItem","parse","getDiffKeys","objA","objB","bKeys","Object","keys","sort","filter","createStore","initState","reducers","watchers","callWatchers","forEach","diffKey","watcher","store","watch","callback","push","set","_set","reset","getState","dispatch","actionName","payload","actionReducers","newData","reduce","accData","reducer","on","action","jActionName","Error","jStores","add","bindCb","elem","addEventListener","event","preventDefault","state","checked","createEvent","eventName","innerEventName","Symbol","size","console","log","toString","Set","modulesStore","window","optionsStore","isAutosave","location","search","isShareCurrent","isShareTarget","modalStore","moduleId","currentLevel","targetLevel","Modal","modal","document","querySelector","title","icon","okBtn","cancelBtn","tableEl","rowsEls","querySelectorAll","target","cancelButtonHandler","okButtonHandler","fromInput","toInput","from","to","setSelectData","moduleData","selected","moduleMaxLevel","length","row","rowLevel","dataset","level","hidden","innerHTML","eng","iconBG","id","getAttribute","setAttribute","open","onOk","onCancel","style","display","scrollTop","close","modulesData","TransportCapacity","colNames","ShipmentComputer","Trader","MiningBoost","EMP","Repair","WeakShield","StandardShield","StrongShield","Teleport","TimeWarp","RedStarExtender","WeakBattery","Battery","Laser","Stealth","MineralStorageCapacity","MassMining","Unity","Fortify","Salvage","Supress","ShipmentDrone","Destiny","PassiveShield","MirrorShield","HydrogenUpload","MiningUnity","MassBattery","DualLaser","Barrier","Impulse","Barrage","TradeBurst","Leap","Vengeance","ShipmentBeam","Sanctuary","Crunch","Recall","AlphaRocket","Enrich","Rush","Genesis","Entrust","Offload","AreaShield","AlphaDrone","Bond","DeltaRocket","BlastShield","OmegaRocket","MiningDrone","DartLauncher","Dispatch","HydroRocket","modulesByTypes","trade","mining","support","shield","weapon","allModuleKeys","module","exports","parseModules","modules","url","userSelect","moduleName","i","stringifyModules","modulesKeys","currentStr","targetStr","transform","input","toLocaleUpperCase","current","parseQueryString","split","params","variable","undefined","decodeURIComponent","stringifyTerm","sec","secInMin","days","Math","floor","hours","mins","result","join","numberWithCommas","x","replace","newSaveBtn","newLoadBtn","resultCreditSpan","resultDurationSpan","CURRENT_URL_RAPAM","TARGET_URL_RAPAM","LOCAL_STORAGE_MODULE_KEY","main","urlModules","getModulesStrFromUrl","currentModuleStr","targetModuleStr","getInitModules","getModulesFromLocalStorage","initSaveAndLoadButtons","initModulesButtons","initAutosaveCB","initShareLink","initModal","autosaveModules","renderLink","shareLink","link","getLink","isCurrent","isTarget","href","newUrl","origin","pathname","paramsStr","saveModules","moduleStrs","transformSavedDataToModelData","history","pushState","urlData","currentModules","targetModules","getCleanState","saveButton","loadButton","updateButton","isSameModules","disabled","modulesA","modulesB","aStr","bStr","getModulePrices","map","price","getModuleTerm","term","renderResult","money","userModuleData","currentPrice","getSumFirst","targetPrice","currentTerm","targetTerm","moneyPerDay","toFixed","termString","arr","n","item","acc","updateButtons","btn","classList","toggle","currentL","targetL","modulesDiv"],"mappings":"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","file":"script.4faf01a2.js","sourceRoot":"../pages","sourcesContent":["export function save(key, value) {\n  localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function get(key, fallback) {\n  const data = localStorage.getItem(key);\n\n  if (data == null && fallback) {\n    save(key, fallback);\n    return fallback;\n  }\n\n  return JSON.parse(data);\n}\n","function getDiffKeys(objA, objB) {\n  const bKeys = Object.keys(objB).sort();\n\n  return bKeys.filter((key) => objA[key] !== objB[key]);\n}\n\nexport function createStore(initState) {\n  let data = initState;\n\n  const reducers = {};\n  const watchers = {};\n\n  function callWatchers(keys, data) {\n    [...keys, `*`].forEach((diffKey) => {\n      (watchers[diffKey] || []).forEach((watcher) => {\n        watcher(data);\n      });\n    });\n  }\n\n  const store = {\n    watch(key, callback) {\n      if (!watchers[key]) {\n        watchers[key] = [];\n      }\n\n      watchers[key].push(callback);\n\n      callback(data);\n    },\n\n    set(callback) {\n      _set(callback(data));\n    },\n\n    reset() {\n      callWatchers(Object.keys(data));\n    },\n\n    getState() {\n      return data;\n    },\n\n    dispatch(actionName, payload) {\n      let actionReducers = reducers[actionName];\n\n      const newData = actionReducers.reduce((accData, reducer) => {\n        return reducer(accData, payload);\n      }, data);\n\n      const diffKeys = getDiffKeys(data, newData);\n      data = newData;\n\n      callWatchers(diffKeys, data);\n    },\n\n    on(action, callback) {\n      if (!action.jActionName) {\n        throw new Error(`Event should be gotten from 'createEvent'`);\n      }\n\n      if (!reducers[action.jActionName]) {\n        reducers[action.jActionName] = [];\n      }\n\n      action.jStores.add(store);\n\n      reducers[action.jActionName].push(callback);\n    },\n\n    bindCb(elem, action) {\n      elem.addEventListener(`change`, (event) => {\n        event.preventDefault();\n        store.set(action);\n      });\n\n      const key = Object.keys(action({}));\n\n      store.watch(key, (state) => {\n        elem.checked = state[key];\n      });\n    },\n  };\n\n  const _set = createEvent(`set`);\n\n  store.on(_set, (state, payload) => {\n    return {\n      ...state,\n      ...payload,\n    };\n  });\n\n  return store;\n}\n\nexport function createEvent(eventName) {\n  const innerEventName = Symbol(eventName);\n\n  function event(payload) {\n    if (event.jStores.size === 0) {\n      console.log(`no reducers for ${innerEventName.toString()}`);\n    }\n    event.jStores.forEach((store) => {\n      store.dispatch(innerEventName, payload);\n    });\n  }\n\n  event.jActionName = innerEventName;\n  event.jStores = new Set();\n\n  return event;\n}\n","import { createStore } from '../state-manager/state';\n\nexport const modulesStore = createStore({});\nwindow.modulesStore = modulesStore;\n\nexport const optionsStore = createStore({\n  isAutosave: location.search ? false : true, // грубая проверка есть ли модули в URL\n  isShareCurrent: false,\n  isShareTarget: false,\n});\nwindow.optionsStore = optionsStore;\n\nexport const modalStore = createStore({\n  moduleId: null,\n  currentLevel: null,\n  targetLevel: null,\n});\nwindow.modalStore = modalStore;\n","const modal = document.querySelector('.modal');\n\nconst title = modal.querySelector('.module-form__title');\nconst icon = modal.querySelector('.module-form__icon');\n\nconst okBtn = modal.querySelector('.btn--ok');\nconst cancelBtn = modal.querySelector('.btn--cancel');\n\nconst tableEl = modal.querySelector('.levels-table');\nconst rowsEls = modal.querySelectorAll('tr[data-level]');\n\nmodal.addEventListener('click', (event) => {\n  if (event.target === modal) {\n    cancelButtonHandler && cancelButtonHandler();\n  }\n});\n\nlet okButtonHandler = null;\nokBtn.addEventListener('click', () => {\n  const fromInput = modal.querySelector('input[name=from]:checked');\n  const toInput = modal.querySelector('input[name=to]:checked');\n\n  okButtonHandler &&\n    okButtonHandler({\n      from: (fromInput && +fromInput.value) || 0,\n      to: (toInput && +toInput.value) || 0,\n    });\n});\n\nlet cancelButtonHandler = null;\ncancelBtn.addEventListener('click', () => {\n  cancelButtonHandler && cancelButtonHandler();\n});\n\nfunction setSelectData(moduleData, selected) {\n  const moduleMaxLevel = moduleData.data.length;\n\n  rowsEls.forEach((row) => {\n    const rowLevel = +row.dataset.level;\n    row.hidden = rowLevel > moduleMaxLevel;\n\n    const fromInput = row.querySelector('input[name=from]');\n    const toInput = row.querySelector('input[name=to]');\n    fromInput.checked = rowLevel == selected.from;\n    toInput.checked = rowLevel == selected.to;\n  });\n\n  title.innerHTML = moduleData.eng || `-`;\n\n  // неприятный хак, но пока других идей нет\n  const iconBG = document.querySelector(`[data-module-id=\"${moduleData.id}\"] .module__icon`).getAttribute('style');\n  icon.setAttribute('style', iconBG);\n}\n\nconst Modal = {\n  open({ moduleData, selected, onOk, onCancel }) {\n    setSelectData(moduleData, selected);\n    modal.style.display = 'block';\n    modal.scrollTop = 0;\n\n    okButtonHandler = onOk;\n    cancelButtonHandler = onCancel;\n  },\n  close() {\n    modal.style.display = '';\n  },\n};\n\nexport default Modal;\n","// generated by /home/nikolay/hades-modules/generateModuleDataFromGameData.js\n// at Thu May 16 2019 09:48:13 GMT+0300 (MSK)\n\nconst modulesData = {\n  TransportCapacity: {\n    eng: 'Cargo Bay Extension',\n    id: 'TransportCapacity',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [1000, 60],\n      [4000, 3600],\n      [15000, 14400],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n      [8000000, 864000],\n    ],\n  },\n  ShipmentComputer: {\n    eng: 'Shipment Computer',\n    id: 'ShipmentComputer',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 14400],\n      [12000, 28800],\n      [25000, 86400],\n      [50000, 172800],\n      [100000, 259200],\n      [250000, 345600],\n      [500000, 432000],\n      [1000000, 518400],\n      [2000000, 604800],\n      [4000000, 691200],\n    ],\n  },\n  Trader: {\n    eng: 'Trade Boost',\n    id: 'Trader',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [15000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [350000, 345600],\n      [550000, 432000],\n      [800000, 518400],\n      [2000000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  MiningBoost: {\n    eng: 'Mining Boost',\n    id: 'MiningBoost',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [2000, 300],\n      [4000, 3600],\n      [25000, 14400],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  EMP: {\n    eng: 'EMP',\n    id: 'EMP',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [2500, 7200],\n      [5000, 14400],\n      [25000, 43200],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  Repair: {\n    eng: 'Remote Repair',\n    id: 'Repair',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 14400],\n      [12000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  WeakShield: {\n    eng: 'Alpha Shield',\n    id: 'WeakShield',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [[1000, 300], [2500, 3600], [8000, 14400], [15000, 86400], [25000, 172800]],\n  },\n  StandardShield: {\n    eng: 'Delta Shield',\n    id: 'StandardShield',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 14400],\n      [12000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [150000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  StrongShield: {\n    eng: 'Omega Shield',\n    id: 'StrongShield',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [30000, 43200],\n      [45000, 86400],\n      [75000, 172800],\n      [100000, 259200],\n      [200000, 345600],\n      [350000, 432000],\n      [700000, 518400],\n      [1000000, 604800],\n      [2500000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  Teleport: {\n    eng: 'Teleport',\n    id: 'Teleport',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 7200],\n      [12000, 14400],\n      [25000, 43200],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  TimeWarp: {\n    eng: 'Time Warp',\n    id: 'TimeWarp',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 14400],\n      [12000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  RedStarExtender: {\n    eng: 'Red Star Life Extender',\n    id: 'RedStarExtender',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 7200],\n      [12000, 14400],\n      [25000, 43200],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  WeakBattery: {\n    eng: 'Weak Battery',\n    id: 'WeakBattery',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [[0, 0]],\n  },\n  Battery: {\n    eng: 'Battery',\n    id: 'Battery',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [1000, 120],\n      [5000, 3600],\n      [12500, 14400],\n      [25000, 86400],\n      [50000, 172800],\n      [100000, 259200],\n      [250000, 345600],\n      [500000, 432000],\n      [750000, 518400],\n      [1000000, 604800],\n    ],\n  },\n  Laser: {\n    eng: 'Laser',\n    id: 'Laser',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 14400],\n      [12000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  Stealth: {\n    eng: 'Stealth',\n    id: 'Stealth',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [25000, 28800],\n      [50000, 57600],\n      [75000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [350000, 345600],\n      [550000, 432000],\n      [800000, 518400],\n      [2000000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  MineralStorageCapacity: {\n    eng: 'Hydrogen Bay Extension',\n    id: 'MineralStorageCapacity',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [2500, 7200],\n      [5000, 14400],\n      [20000, 43200],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  MassMining: {\n    eng: 'Remote Mining',\n    id: 'MassMining',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [15000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  Unity: {\n    eng: 'Unity',\n    id: 'Unity',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [12000, 14400],\n      [25000, 28800],\n      [45000, 57600],\n      [90000, 86400],\n      [170000, 172800],\n      [300000, 259200],\n      [600000, 345600],\n      [1000000, 432000],\n      [2500000, 518400],\n      [5000000, 604800],\n    ],\n  },\n  Fortify: {\n    eng: 'Fortify',\n    id: 'Fortify',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [15000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [350000, 345600],\n      [550000, 432000],\n      [800000, 518400],\n      [2000000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  Salvage: {\n    eng: 'Salvage',\n    id: 'Salvage',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [30000, 43200],\n      [50000, 86400],\n      [75000, 172800],\n      [100000, 259200],\n      [200000, 345600],\n      [350000, 432000],\n      [700000, 518400],\n      [1000000, 604800],\n      [2500000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  Supress: {\n    eng: 'Suppress',\n    id: 'Supress',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [30000, 43200],\n      [50000, 86400],\n      [75000, 172800],\n      [100000, 259200],\n      [200000, 345600],\n      [350000, 432000],\n      [700000, 518400],\n      [1000000, 604800],\n      [2500000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  ShipmentDrone: {\n    eng: 'Shipment Drone',\n    id: 'ShipmentDrone',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [150000, 86400],\n      [200000, 172800],\n      [350000, 259200],\n      [500000, 345600],\n      [750000, 432000],\n      [1000000, 518400],\n      [2000000, 604800],\n      [3000000, 604800],\n      [5000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  Destiny: {\n    eng: 'Destiny',\n    id: 'Destiny',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [200000, 86400],\n      [300000, 172800],\n      [400000, 259200],\n      [500000, 345600],\n      [600000, 432000],\n      [800000, 518400],\n      [1000000, 604800],\n      [3500000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  PassiveShield: {\n    eng: 'Passive Shield',\n    id: 'PassiveShield',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [15000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [350000, 345600],\n      [550000, 432000],\n      [800000, 518400],\n      [2000000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  MirrorShield: {\n    eng: 'Mirror Shield',\n    id: 'MirrorShield',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [400000, 345600],\n      [600000, 432000],\n      [800000, 518400],\n      [1000000, 604800],\n      [3500000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  HydrogenUpload: {\n    eng: 'Hydrogen Upload',\n    id: 'HydrogenUpload',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [20000, 43200],\n      [35000, 86400],\n      [65000, 172800],\n      [100000, 259200],\n      [200000, 345600],\n      [350000, 432000],\n      [700000, 518400],\n      [1000000, 604800],\n      [2500000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  MiningUnity: {\n    eng: 'Mining Unity',\n    id: 'MiningUnity',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [30000, 43200],\n      [50000, 86400],\n      [75000, 172800],\n      [100000, 259200],\n      [200000, 345600],\n      [350000, 432000],\n      [700000, 518400],\n      [1000000, 604800],\n      [2500000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  MassBattery: {\n    eng: 'Mass Battery',\n    id: 'MassBattery',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [15000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [350000, 345600],\n      [550000, 432000],\n      [800000, 518400],\n      [2000000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  DualLaser: {\n    eng: 'Dual Laser',\n    id: 'DualLaser',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [25000, 43200],\n      [50000, 86400],\n      [75000, 172800],\n      [100000, 259200],\n      [200000, 345600],\n      [350000, 432000],\n      [700000, 518400],\n      [1000000, 604800],\n      [2500000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  Barrier: {\n    eng: 'Barrier',\n    id: 'Barrier',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [150000, 86400],\n      [300000, 172800],\n      [400000, 259200],\n      [500000, 345600],\n      [600000, 432000],\n      [800000, 518400],\n      [1000000, 604800],\n      [3500000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  Impulse: {\n    eng: 'Impulse',\n    id: 'Impulse',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [30000, 43200],\n      [60000, 86400],\n      [80000, 172800],\n      [100000, 259200],\n      [200000, 345600],\n      [350000, 432000],\n      [550000, 518400],\n      [800000, 604800],\n      [2000000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  Barrage: {\n    eng: 'Barrage',\n    id: 'Barrage',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [120000, 86400],\n      [300000, 172800],\n      [400000, 259200],\n      [500000, 345600],\n      [600000, 432000],\n      [800000, 518400],\n      [1000000, 604800],\n      [3500000, 604800],\n      [6000000, 604800],\n      [7000000, 604800],\n    ],\n  },\n  TradeBurst: {\n    eng: 'Trade Burst',\n    id: 'TradeBurst',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [20000, 86400],\n      [35000, 172800],\n      [65000, 259200],\n      [100000, 345600],\n      [200000, 432000],\n      [350000, 518400],\n      [700000, 604800],\n      [1000000, 691200],\n      [2500000, 777600],\n      [5000000, 864000],\n    ],\n  },\n  Leap: {\n    eng: 'Leap',\n    id: 'Leap',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [400000, 172800],\n      [500000, 259200],\n      [600000, 345600],\n      [700000, 432000],\n      [800000, 518400],\n      [1000000, 604800],\n      [2000000, 604800],\n      [4000000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  Vengeance: {\n    eng: 'Vengeance',\n    id: 'Vengeance',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [200000, 86400],\n      [300000, 172800],\n      [400000, 259200],\n      [500000, 345600],\n      [600000, 432000],\n      [800000, 518400],\n      [1000000, 604800],\n      [3500000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  ShipmentBeam: {\n    eng: 'Shipment Beam',\n    id: 'ShipmentBeam',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [80000, 86400],\n      [100000, 172800],\n      [120000, 259200],\n      [140000, 345600],\n      [160000, 432000],\n      [180000, 518400],\n      [250000, 604800],\n      [300000, 604800],\n      [350000, 604800],\n      [400000, 604800],\n    ],\n  },\n  Sanctuary: {\n    eng: 'Sanctuary',\n    id: 'Sanctuary',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [[50000, 86400]],\n  },\n  Crunch: {\n    eng: 'Crunch',\n    id: 'Crunch',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [150000, 86400],\n      [230000, 172800],\n      [360000, 259200],\n      [550000, 345600],\n      [850000, 432000],\n      [1300000, 518400],\n      [2000000, 604800],\n      [3000000, 604800],\n      [5000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  Recall: {\n    eng: 'Recall',\n    id: 'Recall',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [[150000, 172800]],\n  },\n  AlphaRocket: {\n    eng: 'AlphaRocket',\n    id: 'AlphaRocket',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [15000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [350000, 345600],\n      [550000, 432000],\n      [800000, 518400],\n    ],\n  },\n  Enrich: {\n    eng: 'Enrich',\n    id: 'Enrich',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [8000, 14400],\n      [12000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [1000000, 432000],\n      [2000000, 518400],\n      [4000000, 604800],\n    ],\n  },\n  Rush: {\n    eng: 'Rush',\n    id: 'Rush',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [15000, 28800],\n      [25000, 57600],\n      [50000, 86400],\n      [100000, 172800],\n      [200000, 259200],\n      [350000, 345600],\n      [550000, 432000],\n      [800000, 518400],\n      [2000000, 604800],\n      [5000000, 604800],\n    ],\n  },\n  Genesis: {\n    eng: 'Genesis',\n    id: 'Genesis',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [200000, 172800],\n      [250000, 259200],\n      [350000, 345600],\n      [500000, 432000],\n      [800000, 518400],\n      [1500000, 604800],\n      [2000000, 604800],\n      [3000000, 604800],\n      [5000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  Entrust: {\n    eng: 'Entrust',\n    id: 'Entrust',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [100000, 172800],\n      [160000, 259200],\n      [250000, 345600],\n      [400000, 432000],\n      [650000, 518400],\n      [1000000, 604800],\n      [1500000, 691200],\n      [2500000, 777600],\n      [4000000, 864000],\n      [6000000, 864000],\n    ],\n  },\n  Offload: {\n    eng: 'Offload',\n    id: 'Offload',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [100000, 172800],\n      [120000, 259200],\n      [140000, 345600],\n      [160000, 432000],\n      [180000, 518400],\n      [200000, 604800],\n      [250000, 691200],\n      [300000, 777600],\n      [400000, 864000],\n      [500000, 864000],\n    ],\n  },\n  AreaShield: {\n    eng: 'Area Shield',\n    id: 'AreaShield',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [200000, 172800],\n      [300000, 259200],\n      [400000, 345600],\n      [600000, 518400],\n      [800000, 604800],\n      [1000000, 604800],\n      [3500000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  AlphaDrone: {\n    eng: 'Alpha Drone',\n    id: 'AlphaDrone',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [1000000, 259200],\n      [2000000, 432000],\n      [3000000, 604800],\n      [4000000, 691200],\n      [5000000, 777600],\n      [6000000, 864000],\n      [7000000, 864000],\n      [8000000, 864000],\n    ],\n  },\n  Bond: {\n    eng: 'Bond',\n    id: 'Bond',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [400000, 172800],\n      [600000, 259200],\n      [1000000, 345600],\n      [1500000, 432000],\n      [2000000, 518400],\n      [3000000, 604800],\n      [4000000, 604800],\n      [5000000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  DeltaRocket: {\n    eng: 'Delta Rocket',\n    id: 'DeltaRocket',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [200000, 172800],\n      [350000, 259200],\n      [500000, 345600],\n      [750000, 432000],\n      [1000000, 518400],\n      [2000000, 604800],\n      [3000000, 691200],\n      [4000000, 777600],\n      [6000000, 864000],\n      [8000000, 864000],\n    ],\n  },\n  BlastShield: {\n    eng: 'Blast Shield',\n    id: 'BlastShield',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [100000, 86400],\n      [150000, 172800],\n      [250000, 259200],\n      [500000, 345600],\n      [750000, 432000],\n      [1000000, 518400],\n      [2000000, 604800],\n      [4000000, 691200],\n      [6000000, 777600],\n      [8000000, 864000],\n    ],\n  },\n  OmegaRocket: {\n    eng: 'Omega Rocket',\n    id: 'OmegaRocket',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [2000000, 259200],\n      [2500000, 345600],\n      [3000000, 432000],\n      [3500000, 518400],\n      [4000000, 604800],\n      [4500000, 691200],\n      [5000000, 777600],\n      [6000000, 864000],\n      [7000000, 864000],\n      [8000000, 864000],\n    ],\n  },\n  MiningDrone: {\n    eng: 'Mining Drone',\n    id: 'MiningDrone',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [1000000, 259200],\n      [2000000, 345600],\n      [3000000, 432000],\n      [4000000, 518400],\n      [5000000, 604800],\n      [6000000, 604800],\n      [7000000, 604800],\n      [8000000, 604800],\n      [8000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  DartLauncher: {\n    eng: 'Dart Launcher',\n    id: 'DartLauncher',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [4000000, 432000],\n      [4500000, 518400],\n      [5000000, 604800],\n      [5500000, 691200],\n      [6000000, 777600],\n      [6500000, 864000],\n      [7000000, 864000],\n      [7500000, 864000],\n      [8000000, 864000],\n      [8000000, 864000],\n    ],\n  },\n  Dispatch: {\n    eng: 'Dispatch',\n    id: 'Dispatch',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [200000, 86400],\n      [300000, 172800],\n      [400000, 259200],\n      [500000, 345600],\n      [600000, 432000],\n      [800000, 518400],\n      [1000000, 604800],\n      [3500000, 604800],\n      [6000000, 604800],\n      [8000000, 604800],\n    ],\n  },\n  HydroRocket: {\n    eng: 'Hydro Rocket',\n    id: 'HydroRocket',\n    colNames: ['UnlockPrice', 'UnlockTime'],\n    data: [\n      [2000000, 259200],\n      [2250000, 345600],\n      [2500000, 432000],\n      [3000000, 518400],\n      [3500000, 604800],\n      [4000000, 691200],\n      [4500000, 777600],\n      [5000000, 864000],\n      [6000000, 864000],\n      [8000000, 864000],\n    ],\n  },\n};\n\nconst modulesByTypes = {\n  trade: [\n    'TransportCapacity',\n    'ShipmentComputer',\n    'Trader',\n    'Rush',\n    'TradeBurst',\n    'ShipmentDrone',\n    'Offload',\n    'ShipmentBeam',\n    'Entrust',\n    'Dispatch',\n    'Recall',\n  ],\n  mining: [\n    'MiningBoost',\n    'MineralStorageCapacity',\n    'Enrich',\n    'MassMining',\n    'HydrogenUpload',\n    'MiningUnity',\n    'Crunch',\n    'Genesis',\n    'HydroRocket',\n    'MiningDrone',\n  ],\n  support: [\n    'EMP',\n    'Teleport',\n    'RedStarExtender',\n    'Repair',\n    'TimeWarp',\n    'Unity',\n    'Sanctuary',\n    'Stealth',\n    'Fortify',\n    'Impulse',\n    'AlphaRocket',\n    'Salvage',\n    'Supress',\n    'Destiny',\n    'Barrier',\n    'Vengeance',\n    'DeltaRocket',\n    'Leap',\n    'Bond',\n    'AlphaDrone',\n    'OmegaRocket',\n  ],\n  shield: [\n    'WeakShield',\n    'StandardShield',\n    'StrongShield',\n    'PassiveShield',\n    'MirrorShield',\n    'AreaShield',\n    'BlastShield',\n  ],\n  weapon: ['WeakBattery', 'Battery', 'Laser', 'MassBattery', 'DualLaser', 'Barrage', 'DartLauncher'],\n};\n\nconst allModuleKeys = [\n  ...modulesByTypes.trade,\n  ...modulesByTypes.mining,\n  ...modulesByTypes.weapon,\n  ...modulesByTypes.shield,\n  ...modulesByTypes.support,\n];\n\nmodule.exports = {\n  allModuleKeys,\n  modulesData,\n  modulesByTypes,\n};\n","export function parseModules(modules, url = ``) {\n  const userSelect = {};\n\n  modules.forEach((moduleName, i) => {\n    userSelect[moduleName] = +`0x${url[i] || 0}` || 0;\n  });\n\n  return userSelect;\n}\n\nexport function stringifyModules(modulesKeys, userSelect) {\n  let currentStr = '';\n  let targetStr = '';\n\n  function transform(input) {\n    input = +input || 0;\n    return input.toString(16).toLocaleUpperCase();\n  }\n\n  modulesKeys.forEach((moduleName, i) => {\n    currentStr += transform(userSelect[moduleName].current);\n    targetStr += transform(userSelect[moduleName].target);\n  });\n\n  return {\n    targetStr,\n    currentStr,\n  };\n}\n\nexport function parseQueryString(url) {\n  const [_, query = ``] = url.split(`?`);\n  const params = {};\n  const vars = query.split('&');\n\n  vars.forEach((variable) => {\n    var [key, value] = variable.split('=');\n\n    if (key) {\n      if (value === undefined) {\n        value = true;\n      }\n      params[decodeURIComponent(key)] = decodeURIComponent(value);\n    }\n  });\n\n  return params;\n}\n","\nexport function stringifyTerm(sec) {\n    const secInMin = 60;\n    const secInHour = 60 * secInMin;\n    const secInDay = 24 * secInHour;\n\n    const days = Math.floor(sec / secInDay);\n    const hours = Math.floor((sec - days * secInDay) / secInHour);\n    const mins = Math.floor((sec - days * secInDay - hours * secInHour) / secInMin);\n\n    let result = [];\n\n    if (days) {\n        result.push(days + `d`);\n    }\n\n    if (hours) {\n        result.push(hours + `h`);\n    }\n\n    if (mins) {\n        result.push(mins + `m`);\n    }\n\n    return result.join(` `);\n}\n\nexport function numberWithCommas(x) {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n","import { save, get } from './localStorageUtils';\nimport { optionsStore, modalStore, modulesStore } from './Model';\nimport Modal from './Modal';\nimport { modulesData, allModuleKeys } from './moduleData';\nimport { parseModules, stringifyModules, parseQueryString } from './urlModules';\nimport {stringifyTerm, numberWithCommas } from './utils';\n\nconst modules = document.querySelector('.modules');\n\nconst newSaveBtn = document.querySelector('.save-button--js');\nconst newLoadBtn = document.querySelector('.load-button--js');\n\nconst resultCreditSpan = document.querySelector('.result-credit .value');\nconst resultDurationSpan = document.querySelector('.result-duration .value');\n\nconst CURRENT_URL_RAPAM = 'cm';\nconst TARGET_URL_RAPAM = 'tm';\nconst LOCAL_STORAGE_MODULE_KEY = 'player_modules';\n\ndocument.addEventListener('DOMContentLoaded', main);\n\nfunction main() {\n  modulesStore.set(() => {\n    const urlModules = getModulesStrFromUrl(location.search);\n\n    if (urlModules.currentModuleStr || urlModules.targetModuleStr) {\n      return getInitModules();\n    } else {\n      return getModulesFromLocalStorage();\n    }\n  });\n\n  initSaveAndLoadButtons(newSaveBtn, newLoadBtn);\n\n  initModulesButtons(modules);\n\n  initAutosaveCB();\n  initShareLink();\n  initModal();\n}\n\nfunction initAutosaveCB() {\n  optionsStore.bindCb(document.querySelector('.autosave--js'), ({ isAutosave }) => ({\n    isAutosave: !isAutosave,\n  }));\n\n  modulesStore.watch(`*`, (state) => {\n    autosaveModules(state);\n  });\n\n  optionsStore.watch(`isAutosave`, () => {\n    autosaveModules(modulesStore.getState());\n  });\n}\n\nfunction initShareLink() {\n  optionsStore.bindCb(document.querySelector('.share-current--js'), ({ isShareCurrent }) => ({\n    isShareCurrent: !isShareCurrent,\n  }));\n  optionsStore.bindCb(document.querySelector('.share-target--js'), ({ isShareTarget }) => ({\n    isShareTarget: !isShareTarget,\n  }));\n\n  function renderLink(state) {\n    const shareLink = document.querySelector('.share-modules-link--js');\n\n    const link =\n      state.isShareCurrent || state.isShareTarget\n        ? getLink({\n            isCurrent: state.isShareCurrent,\n            isTarget: state.isShareTarget,\n          })\n        : ``;\n\n    shareLink.innerHTML = link;\n    shareLink.href = link;\n  }\n\n  optionsStore.watch(`*`, renderLink);\n  modulesStore.watch(`*`, () => {\n    renderLink(optionsStore.getState());\n  });\n}\n\nfunction initModal() {\n  modalStore.watch(`moduleId`, ({ moduleId, currentLevel, targetLevel }) => {\n    if (!moduleId) {\n      Modal.close();\n      return;\n    }\n\n    Modal.open({\n      moduleData: modulesData[moduleId],\n      selected: {\n        from: currentLevel,\n        to: targetLevel,\n      },\n      onCancel: () => {\n        modalStore.set(() => ({\n          moduleId: null,\n        }));\n      },\n      onOk: ({ from, to }) => {\n        modalStore.set(() => ({\n          moduleId: null,\n        }));\n        modulesStore.set(() => ({\n          [moduleId]: {\n            current: +from,\n            target: +to,\n          },\n        }));\n      },\n    });\n  });\n}\n\nfunction getLink({ isCurrent, isTarget }) {\n  let newUrl = `${location.origin}${location.pathname}`;\n  const params = [];\n  const { currentStr, targetStr } = stringifyModules(allModuleKeys, modulesStore.getState());\n\n  if (isCurrent) {\n    params.push(`${CURRENT_URL_RAPAM}=${currentStr}`);\n  }\n\n  if (isTarget) {\n    params.push(`${TARGET_URL_RAPAM}=${targetStr}`);\n  }\n\n  const paramsStr = params.join(`&`);\n\n  if (paramsStr) {\n    newUrl += `?${paramsStr}`;\n  }\n\n  return newUrl;\n}\n\nfunction autosaveModules(modules) {\n  if (optionsStore.getState().isAutosave) {\n    saveModules(modules);\n  }\n}\n\nfunction getInitModules() {\n  const moduleStrs = getModulesStrFromUrl(location.search);\n  const moduleData = transformSavedDataToModelData(moduleStrs);\n  let newUrl = `${location.origin}${location.pathname}`;\n  window.history.pushState('', '', newUrl);\n\n  return moduleData;\n}\n\nfunction getModulesStrFromUrl(url) {\n  const urlData = parseQueryString(url);\n\n  const currentModuleStr = urlData[CURRENT_URL_RAPAM] || ``;\n  const targetModuleStr = urlData[TARGET_URL_RAPAM] || ``;\n\n  return {\n    currentModuleStr,\n    targetModuleStr,\n  };\n}\n\nfunction transformSavedDataToModelData({ currentModuleStr, targetModuleStr }) {\n  const modulesData = {};\n\n  const currentModules = parseModules(allModuleKeys, currentModuleStr || ``);\n  const targetModules = parseModules(allModuleKeys, targetModuleStr || ``);\n\n  Object.keys(currentModules).forEach((moduleId) => {\n    modulesData[moduleId] = {\n      current: currentModules[moduleId],\n      target: targetModules[moduleId],\n    };\n  });\n\n  return modulesData;\n}\n\nfunction saveModules(modules) {\n  save(LOCAL_STORAGE_MODULE_KEY, modules);\n}\n\nfunction getModulesFromLocalStorage() {\n  const data = get(LOCAL_STORAGE_MODULE_KEY, getCleanState());\n  return data;\n}\n\nfunction getCleanState() {\n  const data = {};\n\n  allModuleKeys.forEach((key) => {\n    data[key] = {\n      current: 0,\n      target: 0,\n    };\n  });\n\n  return data;\n}\n\nfunction initSaveAndLoadButtons(saveButton, loadButton) {\n  saveButton.addEventListener(`click`, () => {\n    const modules = modulesStore.getState();\n\n    saveModules(modules);\n    updateButton(modules);\n  });\n\n  loadButton.addEventListener(`click`, () => {\n    modulesStore.set(() => {\n      return getModulesFromLocalStorage();\n    });\n  });\n\n  modulesStore.watch(`*`, (store) => {\n    updateButton(store);\n  });\n\n  function updateButton(store) {\n    if (isSameModules(store, getModulesFromLocalStorage())) {\n      saveButton.disabled = true;\n      loadButton.disabled = true;\n    } else {\n      saveButton.disabled = false;\n      loadButton.disabled = false;\n    }\n  }\n}\n\nfunction isSameModules(modulesA, modulesB) {\n  const aStr = stringifyModules(allModuleKeys, modulesA);\n  const bStr = stringifyModules(allModuleKeys, modulesB);\n\n  return aStr.currentStr === bStr.currentStr && aStr.targetStr === bStr.targetStr;\n}\n\nfunction getModulePrices(moduleData) {\n  return moduleData.data.map(([price, term]) => price);\n}\nfunction getModuleTerm(moduleData) {\n  return moduleData.data.map(([price, term]) => term);\n}\n\nfunction renderResult(state) {\n  let term = 0;\n  let money = 0;\n\n  Object.keys(state).forEach((moduleId) => {\n    const userModuleData = state[moduleId];\n\n    const currentPrice = getSumFirst(getModulePrices(modulesData[moduleId]), userModuleData.current);\n    const targetPrice = getSumFirst(getModulePrices(modulesData[moduleId]), userModuleData.target);\n\n    if (targetPrice > currentPrice) {\n      money += targetPrice - currentPrice;\n    }\n\n    const currentTerm = getSumFirst(getModuleTerm(modulesData[moduleId]), userModuleData.current);\n    const targetTerm = getSumFirst(getModuleTerm(modulesData[moduleId]), userModuleData.target);\n\n    if (targetTerm > currentTerm) {\n      term += targetTerm - currentTerm;\n    }\n  });\n\n  const moneyPerDay = money && term ? ((money / term) * 24 * 60 * 60).toFixed(0) : 0;\n  const termString = stringifyTerm(term);\n\n  resultCreditSpan.innerHTML = money ? `${numberWithCommas(money)} (${numberWithCommas(moneyPerDay)} credit/day)` : `-`;\n\n  resultDurationSpan.innerHTML = termString || `-`;\n\n  function getSumFirst(arr, n) {\n    n = n || 0;\n    return arr.filter((item, i) => i < n).reduce((acc, item) => acc + +item, 0);\n  }\n}\n\nfunction updateButtons(modulesData) {\n  Object.keys(modulesData).forEach((moduleId) => {\n    const btn = document.querySelector(`.module[data-module-id='${moduleId}']`);\n    const { current, target } = modulesData[moduleId];\n\n    btn.classList.toggle(`module--closed`, !current && !target);\n    btn.classList.toggle(`module--active`, current < target);\n\n    btn.dataset.currentL = modulesData[moduleId].current;\n    btn.dataset.targetL = modulesData[moduleId].target;\n  });\n}\n\nfunction initModulesButtons(modulesDiv) {\n  modulesDiv.querySelectorAll('button').forEach((btn) => {\n    const moduleName = btn.dataset.moduleId;\n\n    if (!modulesData[moduleName]) {\n      console.log(`there are no module this name: ${moduleName}`);\n      return;\n    }\n\n    btn.addEventListener('click', () => {\n      const moduleData = modulesData[moduleName];\n      const state = modulesStore.getState();\n      const userSelect = state[moduleData.id];\n\n      modalStore.set(() => ({\n        moduleId: moduleData.id,\n        currentLevel: userSelect.current,\n        targetLevel: userSelect.target,\n      }));\n    });\n  });\n\n  modulesStore.watch(`*`, (state) => {\n    updateButtons(state);\n  });\n\n  modulesStore.watch(`*`, (state) => {\n    renderResult(state);\n  });\n}\n"]}